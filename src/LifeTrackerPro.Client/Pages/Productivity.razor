@page "/productivity"

<PageTitle>Productivity — LifeTracker Pro</PageTitle>

<div class="page-enter">
    <h1 class="lt-page-heading">Productivity <span class="accent">Hub</span></h1>
    <p class="lt-page-subtitle">Your daily command center for focus and execution</p>

    <!-- Morning Briefing -->
    <div class="lt-card accent lt-ai-summary" style="margin-bottom:22px;">
        <div style="font-size:10px; color:var(--crail); font-family:var(--font-mono); font-weight:700; text-transform:uppercase; letter-spacing:0.15em; margin-bottom:12px;">
            ☀ Morning Briefing
        </div>
        <div style="font-size:15px; color:var(--ink); font-family:var(--font-serif); line-height:1.8;">
            <p style="margin:0 0 6px;">3 goals active: Sleep ≥7h ✓ · Exercise ≥1h ⏳ · Read 30min ⏳</p>
            <p style="margin:0 0 6px;">Exercise streak: <strong>5 days</strong>. Yesterday: <strong>9h work</strong> (above avg).</p>
            <p style="margin:0; color:var(--crail); font-style:italic;">"Consistency beats intensity. 28 days — remarkable."</p>
        </div>
    </div>

    <div class="lt-chart-grid-2" style="margin-bottom:22px;">
        <!-- Focus Score -->
        <div class="lt-card">
            <div class="lt-section-label"><span>Focus Score</span></div>
            <div style="text-align:center; padding:10px 0;">
                <svg width="150" height="150" viewBox="0 0 150 150">
                    <circle cx="75" cy="75" r="62" fill="none" stroke="var(--pampas)" stroke-width="10" />
                    <circle cx="75" cy="75" r="62" fill="none" stroke="var(--crail)" stroke-width="10"
                            stroke-dasharray="@((int)(0.78 * 390)) 390"
                            stroke-linecap="round" transform="rotate(-90 75 75)"
                            style="transition:stroke-dasharray 2s ease; filter:drop-shadow(0 0 10px rgba(193,95,60,0.19));" />
                    <text x="75" y="70" text-anchor="middle" fill="var(--ink)" font-size="40" font-weight="700"
                          font-family="'Libre Baskerville',serif">78</text>
                    <text x="75" y="92" text-anchor="middle" fill="var(--ink-muted)" font-size="12"
                          font-family="'JetBrains Mono',monospace">/100</text>
                </svg>
            </div>
        </div>

        <!-- Planned vs Actual -->
        <div class="lt-card">
            <div class="lt-section-label"><span>Planned vs Actual</span></div>
            <div style="display:grid; gap:12px; padding:10px 0;">
                @foreach (var item in _plannedVsActual)
                {
                    <div>
                        <div style="display:flex; justify-content:space-between; margin-bottom:4px;">
                            <span style="font-size:12px; color:var(--ink-soft); font-family:var(--font-sans); font-weight:600;">@item.Subject</span>
                            <span style="font-size:10px; color:var(--ink-muted); font-family:var(--font-mono);">
                                @item.Planned h → @item.Actual h
                            </span>
                        </div>
                        <div style="display:flex; gap:4px; height:8px;">
                            <div style="flex:@item.Planned; background:var(--cloudy-pale); border-radius:4px 0 0 4px;"></div>
                            <div style="flex:@item.Actual; background:var(--crail); border-radius:0 4px 4px 0;"></div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <!-- Tasks -->
    <div class="lt-card">
        <div class="lt-section-label"><span>Tasks</span></div>
        @foreach (var (task, idx) in _tasks.Select((t, i) => (t, i)))
        {
            <div style="display:flex; align-items:center; gap:14px; padding:12px 0;@(idx < _tasks.Count - 1 ? " border-bottom:1px solid var(--border);" : "")">
                <div class="lt-task-check @(task.Done ? "done" : "pending")">
                    @if (task.Done) { <span>✓</span> }
                </div>
                <span style="flex:1; color:@(task.Done ? "var(--ink-muted)" : "var(--ink)"); font-size:14px; font-family:var(--font-sans); font-weight:600;@(task.Done ? " text-decoration:line-through;" : "")">
                    @task.Title
                </span>
                <span style="font-size:10px; color:var(--ink-muted); font-family:var(--font-mono);">@task.Time</span>
                <span class="lt-tag @(task.Priority == "High" ? "danger" : task.Priority == "Med" ? "warning" : "crail")"
                      style="font-size:9px; padding:3px 10px; border-radius:8px; font-weight:700;">@task.Priority</span>
            </div>
        }
    </div>
</div>

@code {
    private record PlannedActual(string Subject, int Planned, int Actual);
    private record TaskItem(string Title, string Time, string Priority, bool Done);

    private readonly List<PlannedActual> _plannedVsActual = new()
    {
        new("Work", 8, 9),
        new("Exercise", 2, 1),
        new("Sleep", 8, 7),
        new("Social", 2, 3)
    };

    private readonly List<TaskItem> _tasks = new()
    {
        new("Review PR #342", "09:00", "High", true),
        new("Update docs", "11:00", "Med", false),
        new("Gym — legs", "17:00", "High", false),
        new("Read ch.5", "21:00", "Low", false)
    };
}
