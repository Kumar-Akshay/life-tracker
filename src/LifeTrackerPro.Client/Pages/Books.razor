@page "/books"

<PageTitle>Books — LifeTracker Pro</PageTitle>

<div class="page-enter">
    <h1 class="lt-page-heading">Book <span class="accent">Collection</span></h1>
    <p class="lt-page-subtitle">Track your reading journey, one page at a time</p>

    <!-- Stats -->
    <div class="lt-kpi-grid" style="margin-bottom:24px;">
        <div class="lt-card">
            <div class="lt-stat-label">Books</div>
            <div class="lt-stat-value">4</div>
        </div>
        <div class="lt-card">
            <div class="lt-stat-label">Completed</div>
            <div class="lt-stat-value">1</div>
        </div>
        <div class="lt-card">
            <div class="lt-stat-label">Pages</div>
            <div class="lt-stat-value">942</div>
        </div>
        <div class="lt-card">
            <div class="lt-stat-label">Pace</div>
            <div class="lt-stat-value">15<span class="unit">/day</span></div>
        </div>
    </div>

    <!-- Book Cards -->
    @foreach (var book in _books)
    {
        <div class="lt-card" style="margin-bottom:12px; display:flex; gap:20px; align-items:center;">
            <!-- Cover -->
            <div class="lt-book-cover" style="background:@book.Color; box-shadow:4px 6px 16px @(book.Color)20;">
                <span>@book.Title[0]</span>
            </div>

            <!-- Info -->
            <div style="flex:1;">
                <div style="display:flex; justify-content:space-between; align-items:start;">
                    <div>
                        <div style="color:var(--ink); font-size:17px; font-weight:700; font-family:var(--font-serif);">@book.Title</div>
                        <div style="color:var(--ink-muted); font-size:12px; font-family:var(--font-sans);">@book.Author</div>
                    </div>
                    <span class="lt-tag @(book.Status == "Completed" ? "success" : book.Status == "In Progress" ? "warning" : "")"
                          style="font-size:10px; padding:4px 12px; border-radius:10px; font-weight:700;
                                 @(book.Status == "Completed" ? "background:var(--success-pale); color:var(--success);" :
                                   book.Status == "In Progress" ? "background:var(--warning-pale); color:var(--warning);" :
                                   "background:var(--cloudy-pale); color:var(--ink-muted);")">
                        @book.Status
                    </span>
                </div>
                <div style="margin-top:10px;">
                    <div class="lt-progress-track" style="height:6px;">
                        <div class="lt-progress-fill @(book.Status == "Completed" ? "success" : "crail")"
                             style="width:@(book.TotalPages > 0 ? (int)(book.ReadPages * 100.0 / book.TotalPages) : 0)%;"></div>
                    </div>
                    <div style="display:flex; justify-content:space-between; margin-top:5px;">
                        <span style="font-size:10px; color:var(--ink-muted); font-family:var(--font-mono);">@book.ReadPages/@book.TotalPages pages</span>
                        @if (book.Rating > 0)
                        {
                            <span style="font-size:11px; color:var(--warning);">@(new string('★', book.Rating))</span>
                        }
                    </div>
                </div>
            </div>
        </div>
    }
</div>

@code {
    private record BookInfo(string Title, string Author, int TotalPages, int ReadPages, string Status, int Rating, string Color);

    private readonly List<BookInfo> _books = new()
    {
        new("Clean Architecture", "R.C. Martin", 432, 432, "Completed", 5, "#C15F3C"),
        new("Data-Intensive Apps", "M. Kleppmann", 616, 310, "In Progress", 0, "#6B8EC7"),
        new("Atomic Habits", "J. Clear", 320, 0, "To Start", 0, "#5B8C51"),
        new("Pragmatic Programmer", "Hunt & Thomas", 352, 200, "In Progress", 0, "#C49A2D")
    };
}
