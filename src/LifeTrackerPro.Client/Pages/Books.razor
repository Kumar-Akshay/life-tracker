@page "/books"

<PageTitle>Books — LifeTracker Pro</PageTitle>

<h2 class="heading-display" style="font-size:24px; margin:0 0 4px;">Book Reading List</h2>
<p class="subtitle-text">Track reading progress and capture knowledge</p>

<!-- Stats -->
<div style="display:grid; grid-template-columns:repeat(4, 1fr); gap:12px; margin-bottom:20px;">
    <div class="metric-card">
        <span class="metric-value">@_books.Count</span>
        <span class="metric-label">Total Books</span>
    </div>
    <div class="metric-card">
        <span class="metric-value">@_books.Count(b => b.Status == "Completed")</span>
        <span class="metric-label">Completed</span>
    </div>
    <div class="metric-card">
        <span class="metric-value">@_books.Sum(b => b.Current)</span>
        <span class="metric-label">Pages Read</span>
    </div>
    <div class="metric-card">
        <span class="metric-value">15 pg/day</span>
        <span class="metric-label">Reading Pace</span>
    </div>
</div>

<!-- Book Cards -->
@foreach (var book in _books)
{
    var colorIndex = _books.IndexOf(book) % _bookColors.Length;
    var gradient = _bookColors[colorIndex];

    <div class="book-card">
        <!-- Book Cover -->
        <div class="book-cover" style="background:linear-gradient(135deg, @gradient.From, @gradient.To);">
            <span>@book.Title[0]</span>
        </div>

        <!-- Book Info -->
        <div style="flex:1;">
            <div style="display:flex; justify-content:space-between; align-items:start;">
                <div>
                    <div style="color:#e2e8f0; font-size:14px; font-weight:600; font-family:'DM Sans',sans-serif;">@book.Title</div>
                    <div style="color:#64748b; font-size:12px; font-family:'DM Sans',sans-serif;">@book.Author · @book.Genre</div>
                </div>
                <span class="lt-tag @(book.Status == "Completed" ? "lt-tag-green" : book.Status == "In Progress" ? "lt-tag-yellow" : "lt-tag-muted")" style="font-weight:600;">
                    @book.Status
                </span>
            </div>

            <!-- Progress Bar -->
            <div style="margin-top:8px;">
                <div class="lt-progress-bar">
                    <div class="lt-progress-fill" style="width:@((double)book.Current / book.Pages * 100)%; background:@(book.Status == "Completed" ? "#22c55e" : "#6366f1");"></div>
                </div>
                <div style="display:flex; justify-content:space-between; margin-top:4px;">
                    <span style="font-size:10px; color:#64748b; font-family:'Space Mono',monospace;">@book.Current / @book.Pages pages</span>
                    @if (book.Rating > 0)
                    {
                        <span style="font-size:10px; color:#eab308;">@(new string('★', book.Rating))</span>
                    }
                </div>
            </div>
        </div>
    </div>
}

@code {
    private List<BookItem> _books = new()
    {
        new("Clean Architecture", "Robert C. Martin", 432, 432, "Completed", 5, "Engineering"),
        new("Designing Data-Intensive Applications", "Martin Kleppmann", 616, 310, "In Progress", 0, "Systems"),
        new("Atomic Habits", "James Clear", 320, 0, "To Start", 0, "Self-Help"),
        new("The Pragmatic Programmer", "Hunt & Thomas", 352, 200, "In Progress", 0, "Engineering"),
    };

    private (string From, string To)[] _bookColors = new[]
    {
        ("#6366f1", "#8b5cf6"),
        ("#2563eb", "#3b82f6"),
        ("#16a34a", "#22c55e"),
        ("#d4a373", "#e8a87c"),
    };

    private record BookItem(string Title, string Author, int Pages, int Current, string Status, int Rating, string Genre);
}
